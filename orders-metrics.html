<html>

<head>
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script type="text/javascript"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.js"></script>

	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">


	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.css">


	<script>
		google.charts.load('current', { 'packages': ['bar'] });
		google.charts.setOnLoadCallback(drawChart);
		google.charts.setOnLoadCallback(drawChart1);




		var Truck_data = [

			{

				date: "15/12/19",
				details: [
					{
						driver_name: "ram",
						truck_number: "KA 03 2132",
						distance_travelled: 50,
						orders_delivered: 45,
						orders_missed: 10
					},
					{
						driver_name: "raju",
						truck_number: "KA 03 2354",
						distance_travelled: 30,
						orders_delivered: 15,
						orders_missed: 1
					},
					{
						driver_name: "john",
						truck_number: "KA 03 7676",
						distance_travelled: 70,
						orders_delivered: 32,
						orders_missed: 43
					},
					{
						driver_name: "sam",
						truck_number: "KA 03 3645",
						distance_travelled: 56,
						orders_delivered: 11,
						orders_missed: 07
					},
					{
						driver_name: "tre",
						truck_number: "KA 03 9867",
						distance_travelled: 58,
						orders_delivered: 32,
						orders_missed: 11
					},
					{
						driver_name: "abrggdc",
						truck_number: "KA 03 0989",
						distance_travelled: 50,
						orders_delivered: 45,
						orders_missed: 10
					},
					{
						driver_name: "afgdgbc",
						truck_number: "KA 03 7777",
						distance_travelled: 45,
						orders_delivered: 35,
						orders_missed: 16
					}
				]
			},

			{



				date: "12/12/19",
				details: [
					{
						driver_name: "ram",
						truck_number: "KA 03 2132",
						distance_travelled: 50,
						orders_delivered: 65,
						orders_missed: 20
					},
					{
						driver_name: "raju",
						truck_number: "KA 03 2354",
						distance_travelled: 30,
						orders_delivered: 65,
						orders_missed: 34
					},
					{
						driver_name: "john",
						truck_number: "KA 03 7676",
						distance_travelled: 70,
						orders_delivered: 39,
						orders_missed: 4
					},
					{
						driver_name: "sam",
						truck_number: "KA 03 3645",
						distance_travelled: 56,
						orders_delivered: 52,
						orders_missed: 42
					},
					{
						driver_name: "tre",
						truck_number: "KA 03 9867",
						distance_travelled: 58,
						orders_delivered: 32,
						orders_missed: 11
					},
					{
						driver_name: "abrggdc",
						truck_number: "KA 03 0989",
						distance_travelled: 50,
						orders_delivered: 45,
						orders_missed: 10
					},
					{
						driver_name: "afgdgbc",
						truck_number: "KA 03 7777",
						distance_travelled: 45,
						orders_delivered: 35,
						orders_missed: 16
					}
				]

			},


			{



				date: "13/12/19",
				details: [
					{
						driver_name: "ram",
						truck_number: "KA 03 2132",
						distance_travelled: 50,
						orders_delivered: 65,
						orders_missed: 20
					},
					{
						driver_name: "raju",
						truck_number: "KA 03 2354",
						distance_travelled: 30,
						orders_delivered: 65,
						orders_missed: 34
					},
					{
						driver_name: "john",
						truck_number: "KA 03 7676",
						distance_travelled: 70,
						orders_delivered: 39,
						orders_missed: 4
					},
					{
						driver_name: "sam",
						truck_number: "KA 03 3645",
						distance_travelled: 56,
						orders_delivered: 52,
						orders_missed: 42
					},
					{
						driver_name: "tre",
						truck_number: "KA 03 9867",
						distance_travelled: 58,
						orders_delivered: 32,
						orders_missed: 11
					},
					{
						driver_name: "abrggdc",
						truck_number: "KA 03 0989",
						distance_travelled: 50,
						orders_delivered: 45,
						orders_missed: 10
					},
					{
						driver_name: "afgdgbc",
						truck_number: "KA 03 7777",
						distance_travelled: 45,
						orders_delivered: 35,
						orders_missed: 16
					}
				]

			}




		];
		var TruckOrder = [['Truck', 'Orders Missed', 'Total Orders']];
		//function PopulateData(j)
		for (var j = 0; j < Truck_data.length; j++) {

			for (var i = 0; i < Truck_data[j].details.length; i++) {
				var array = [Truck_data[j].details[i].truck_number, Truck_data[j].details[i].orders_missed, Truck_data[j].details[i].orders_delivered + Truck_data[j].details[i].orders_missed];
				//console.log(array);
				TruckOrder.push(array);
			}
		}




		//console.log(TruckOrder);

		function drawChart() {
			var data = google.visualization.arrayToDataTable(TruckOrder);

			var options = {

				//isStacked: 'percent',
				isStacked: true,
				legend: { position: 'bottom' },
				chart: {
					title: 'Total Orders vs Missed',
					//subtitle: 'Sales, Expenses, and Profit: 2014-2017',
				},
				bars: 'vertical' // Required for Material Bar Charts.
			};

			var chart = new google.charts.Bar(document.getElementById('barchart_material'));

			chart.draw(data, google.charts.Bar.convertOptions(options));
		}

		function drawChart1() {
			

			var data = google.visualization.arrayToDataTable([
                ['Month', 'Bolivia', 'Ecuador', 'Madagascar', 'Papua New Guinea', 'Rwanda', 'Average'],
                ['2004/05', 165, 938, 522, 998, 450, 614.6],
                ['2005/06', 135, 1120, 599, 1268, 288, 682],
                ['2006/07', 157, 1167, 587, 807, 397, 623],
                ['2007/08', 139, 1110, 615, 968, 215, 609.4],
                ['2008/09', 136, 691, 629, 1026, 366, 569.6]
            ]);

            var options = {
                title: 'Monthly Coffee Production by Country',
                vAxis: { title: 'Cups' },
                hAxis: { title: 'Month' },
                seriesType: 'bars',
                series: { 5: { type: 'line' } }
            };

            var chart = new google.visualization.ComboChart(document.getElementById('chart_div'));
            chart.draw(data, options);
		}



		$(document).ready(function () {
			$("p").click(function () {
				$("p").hide();
			});


		});



	//   $(document).ready(function(){
	// 			$("#barchart_material").dblclick(function(){
	// 				alert("Abundance alert!!!")
	// 			});
	// 		});

	</script>
</head>

<body>

	<div class="container">
		<div class="row">
			<div class='col-sm-6'>
				<div class="form-group">
					<div class='input-group date' id='datetimepicker1'>
						<input type='text' class="form-control" />
						<span class="input-group-addon">
							<span class="glyphicon glyphicon-calendar"></span>
						</span>
					</div>
				</div>
			</div>

		</div>
	</div>

	<div id="barchart_material" style="width: 900px; height: 500px;"></div>
	<div id="chart_div" style="width: 900px; height: 500px;"></div>



	<script type="text/javascript">
		$(function () {
			$('#datetimepicker1').datetimepicker({
				format: 'DD/MM/YYYY'
			});
		});



		var ChoosenDate;
		$('#datetimepicker1').on('dp.change', function () {
			ChoosenDate = $('#datetimepicker1 input').val();
			console.log(ChoosenDate);


			for (var i = 0; i < Truck_data.length; i++) {
				if (ChoosenDate == Truck_data[i].date) {
					//PopulateData(i);
					console.log("hello");
					for (var k = 0; k < Truck_data[k].details.length; k++) {

						var array = [Truck_data[i].details[k].truck_number, Truck_data[i].details[k].orders_missed, Truck_data[i].details[k].orders_delivered + Truck_data[i].details[k].orders_missed];
						console.log(array);
						TruckOrder.push(array);
					}
				}


			}

			drawChart();


		})

	</script>
</body>

</html>